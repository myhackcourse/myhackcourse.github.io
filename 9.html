<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="source/favicon.ico" type="image/x-icon">
    <title>Уроки | University 2.0</title>
    <link rel="stylesheet" href="source/main.css">
    <link rel="stylesheet" href="source/style.css">

    <link rel="stylesheet" href="source/tikets.css">
    <link rel="stylesheet" href="source/profile_window.css">

    <link rel='stylesheet' href="source/default.css">
    <link rel='stylesheet' href="source/idea.css">
    <script type="text/javascript" src="source/highlight.pack.js"></script>
</head>
<body>


    <div id="myfond_gris" opendiv=""></div>
    <div align="center" style="padding-top:35px;">
        <div id="box_1" class="mymagicoverbox_fenetre" style="left:-225px; width:450px;">
            Anon | 00500
            <div class="mymagicoverbox_fenetreinterieur" style="height:220px; ">
                <div align="left">
                    <p class="lead">Имя пользователя: Anon</p>
                    <p class="lead">Статус: Активен</p>
                    <p class="lead">Регистрация jabber: <a target="_blank" href="http://plast.cash/registration.php?key="></a></p>
                    <p class="lead">Поток: Anon</p>
                    <p class="lead">TG канал: <a target="_blank" href="">Канал для опретивных оповещений</a></p>
                    
                    <br><br>
                    <div style="width:100px" align="center" class="mymagicoverbox_fermer">Закрыть</div>
                </div>
            </div>
        </div>
    </div>



<div class="main_container">
    <header>
        <a href="index.html"><img class="logo" src="source/logo.png" alt="University 2.0"></a>
        <div class="header_right">
            <div class="user_info">
                <p>Hello,
                <a href="#" iddiv="box_1" class="mymagicoverbox"> Anon </a>


                </p>
                <p>ID: 00500</p>
            </div>
            <div class="user_actions">
                <a href="help.html"
                   class="btn btn_gray btn_transparent btn_border_transparent btn_icon btn_icon_help">Помощь</a>
                
                    
                    <a href="index.html" class="btn  btn_round btn_status btn_status_active btn_gray btn_exit">Выход</a>
                
            </div>
        </div>
    </header>
    <div class="container">
        <nav>
            <a href="index.html" class="btn btn_icon btn_icon_dashboard ">Сводка</a>
            <a href="lections.html" class="btn btn_icon btn_icon_book active">Лекции</a>
            <a href="index.html" class="btn btn_icon btn_icon_group ">Тикеты</a>
            <a href="faq.html" class="btn btn_icon btn_icon_chat ">FAQ</a>
        </nav>
        <div class="content">

<div class="banner_block" style="background-image:url('source/hack_tie4J6J.jpg')">
        <div class="banner_content">
            <h2>Введение</h2>
            <p>Безопасность</p>
            <p>Покидай свой дом так, словно его охраняет тысяча врагов!</p>
        </div>
    </div>
    <br>


<div class="article_actions">
        <a href="security.html" class="btn btn_round btn_gray  btn_icon btn_icon_back ">Назад</a>
    </div>
    <div class="text_content">
        <p>Та операционная система, в которой запущен браузер и с которой читается эта лекция -- это хост система. Она так называется потому что <strong>является платформой для всех запускаемых в ней приложений</strong>. Запускать всё в одной системе удобно, но у этого есть один большой минус: если все приложения используют одно систему, то они могут влиять друг на друга, смотреть системные настройки, пытаться отслеживать систему по её уникальным параметрам. А если попадает вирус на хост, то последствия её более масштабные: всей безопасности наступает конец. Потому что из хоста можно управлять всем, и никакие настройки безопасности тут не помогут.</p>

<div style="background:#eeeeee; border:1px solid #cccccc; padding:5px 10px">Поэтому критически важно не устанавливать на хост ничего лишнего и подозрительного. Системе с вирусами настройки безопасности и виртуальные машины не помогут.</div>

<p>Кстати, не только вирусы занимаются отслеживанием системы, выявлением её уникальных идентификаторов и т.п. Функции телеметрии в той или иной степени присутствуют в любой системе, а главное они часто встречаются в проприетарных ПО(хотя бывают в абсолютно любых программах и даже open source). Поэтому есть необходимость в максимальной виртуализации, чтобы на хост системе был только надёжный минимум, а всё остальное работало в виртуальных машинах, в которых вопрос защиты системы не стоит.</p>

<p>Начнём с начала. <strong>Что такое виртуальная машина?</strong> -- это система, которая работает в специальной программе для виртуализации. Причём в виртуальной среде с полной виртуализацией можно запустить любую систему, даже отличного типа от хост системы. Например, на linux развернуть windows или на оборот. В общем инструмент очень мощный. И ещё один важный момент, можно построить виртуальную внутреннюю сеть, которая будет жить по своим правилам.</p>

<p>Вообще локальных сетей есть много. Например, если подключение осуществляется через роутер, то все устройства, подключённые к роутеру, состоят в локальной сети. Главные отличительные черты локальной сети: её участники обмениваться данными между собой через специальное устройство(маршрутизатор), которое поддерживает эту сеть. Через него идут все запросы, и оно доступно из внешней сети. В сети с роутером эту функцию берёт на себя непосредственно сам роутер. Устройство, которое обрабатывает все запросы в локальной сети указывается в настройках как гейт или шлюз. В обычной домашней локальной сети роутер ещё обеспечивает доступ к внешнему миру, направляя запросы в интернет. Если вы представили у себя в голове эту картину, значит вы уже понимаете, что такое локальная сеть.</p>

<p><strong>Переходим ко второму этапу</strong><br />
Сюда добавляется OpenVPN. Он создаёт в системе виртуальный адаптер, на который переключаются все соединения в системе. Это виртуальный компонент, его не существует в виде оборудования. Если до этого у вас был один адаптер, то это ethernet адаптр, которые установлен на материнской плате компьютера. Работу нового TAP адапра поддерживает программа OpenVPN. Возникает вопрос, а как же он подключается к интернету тогда, если не его не существует? - Он использует имеющийся реальный адаптер. То есть openvpn оборачивает весь интернет трафик и направляет его на vpn сервер через реальный адаптер, он выступает виртуальным слоем. Помимо этого <strong>у openvpn есть ещё одна важная функция - шифрование всего проходящего через него трафика</strong>, чтобы даже если его перехватили, передаваемые данные были в нечитабельном виде.</p>

<p>Многие сайты работают на https, это протокол обмена данными с шифрованием. Но даже его не достаточно, потому что при перехвате https пакета видно сервер, куда он направляется. Это случается потому что шифрование делается на разных уровнях. Есть модель OSI по которой всё, что есть в системе, делится на 7 уровней. Чем ниже уровень, тем меньше абстракция данных. Суть в том, что на каждом уровне храниться своя информация о данных. ssl работает на 4 уровне - транспортном уровне. А данные о конечном сервере храняться на 3 уровне и ssl с ними ничего не делает. Поэтому роль VPN в системе важна, он работает на 3 уровне(сетевом) и защищяет информацию о назначении пакета и его содержании(даже если он был уже зашифрован ssl).</p>

<p><strong>Следующий шаг</strong><br />
Добавление нового слоя безопасности - виртуализации систем. Это делается при помощи VirtualBox, который поддерживает полную виртуализацию в том числе компонентов. Его альтернатива: VMware. Он может быть удобнее при одновременной работе с большим числом машин, но на первое время надо пробовать работать с VirtualBox, потому что это проверенное временем open source решение.</p>

<p>С помощью whonix gateway будет создана новая внутривенная сеть, она работает поверх текущего подключения. Если в системе стоит VPN, то трафик с виртуалок через gateway так же пойдёт через VPN.</p>

<p>Схема подключения виртуалки через gateway: Виртуалка - Whonix Gateway - основной адаптер в системе(виртуальный TAP, если работает OpenVPN) - сеть.</p>

<p>И роль whonix gateway тут обернуть трафик и направить его через tor. Он работает по принципу: либо данные с него идут через тор, либо не идут вообще никак.</p>

<p>После теста будет непосредственная настройка защищённой от внешнего воздействия сети и установка виртуальных систем для работы.</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>&nbsp;</p>

<p>Первым делом скачиваем и устанавливаем VirtualBox последней версии. Найти его можно на странице загрузок на <a href="https://www.virtualbox.org/wiki/Downloads">официальном сайте</a>. Нам нужна версия для Windows hosts.</p>

<p>Для настройки работы через TOR надо создать защищенную внутреннюю сеть. Для этих целей используется Whonix. Лучшим способом установки является не установка exe версии для windows, а <strong>прямой импорт в виртуальную машину</strong>. Найти образы для импорта можно на <a href="https://www.whonix.org/wiki/VirtualBox">официальном сайте whonix</a>. Нам потребуется только Gateway. Его надо загрузить по ссылке <a href="https://www.whonix.org/wiki/VirtualBox/XFCE" title="VirtualBox/XFCE">Whonix with XFCE</a>.</p>

<p>После окончания загрузки достаточно будет открыть загруженный файл двойным кликом, запустится меню импорта VirtualBox. Единственное, что надо будет изменить в параметрах машины -- <strong>перегенерировать MAC адрес</strong>. Для этого надо будет поставить соответствующую галочку внизу(Reinitialize the MAC address of all network cards)</p>

<p>После импорта в меню VirtualBox появится новая виртуальная машина Whonix-Gateway. Если её запустить, то запустится копия linux, которая обеспечивает работу gateway. Но лучше сразу изменить настройки и отключить графический интерфейс, который gateway не так нужен. Для этого выбираем виртуальную машину одинарным кликом и нажимаем кнопку <strong>Settings(Настройки)</strong> вверху. Затем переходим в пункт <strong>Display(Дисплей)</strong> и уменьшаем объём <strong>Video Memory(видео память)</strong> до <strong>4MB</strong>. В пункте <strong>System(Система)</strong> в первой вкладке <strong>Mother board(Материнская плата)</strong> устанавливаем объём <strong>Base memory(Основная память)</strong> значение <strong>256 MB(МБ)</strong>. После этого жмём ок и можно запустить машину, чтобы убедиться, что она работает.</p>

<p>После загрузки, которая длится около минуты, запустится консольный linux с меню входа в систему. Настройки по умолчанию:</p>

<blockquote>
<p>Имя пользователя: <strong>root</strong><br />
Пароль: <strong>changeme</strong></p>

<p><span style="color:#999999">пароль в процессе ввода не отображается</span></p>
</blockquote>

<p>Основные команды для управление gateway:</p>

<ul>
    <li>service tor restart -- перезапустить тор, это принудительно закроет все текущие соединения.</li>
    <li>poweroff -- выключить gateway</li>
    <li>passwd -- установить новый пароль текущему пользователю</li>
    <li>killall -HUP tor -- обновить tor. Все новые соединения будут под новым адресом, но если есть активные соединения, они продолжат работать.</li>
</ul>

<p>В последующих практических материалах будет непосредственная установка виртуальных операционных систем. <strong>Чтобы интернет на них работал виртуальная машина whonix gateway должна быть постоянно запущена в фоне.</strong> Без этого интернет на виртуальной машине будет отсутствовать.</p>

<p style="margin-left:40px">На некоторых системах функция Virtualization Technology(VT) для Intel или AMD-V для and не включены по умолчанию. Без них не получится установить 64 битные системы. windows и linux, которые мы будем устанавливать, есть и в 32 битном варианте, но если основная система x64, а в VirtualBox при дальнейших установках 64bit не будет доступен, <strong>зайдите в BIOS и включите соответствующую технологию</strong>.</p>
    </div>

 
        </div>
    </div>
</div>
<footer>
    <p>University 2.0</p>
</footer>

</body>
</html>
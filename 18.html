<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="source/favicon.ico" type="image/x-icon">
    <title>Уроки | University 2.0</title>
    <link rel="stylesheet" href="source/main.css">
    <link rel="stylesheet" href="source/style.css">

    <link rel="stylesheet" href="source/tikets.css">
    <link rel="stylesheet" href="source/profile_window.css">

    <link rel='stylesheet' href="source/default.css">
    <link rel='stylesheet' href="source/idea.css">
    <script type="text/javascript" src="source/highlight.pack.js"></script>
</head>
<body>


    <div id="myfond_gris" opendiv=""></div>
    <div align="center" style="padding-top:35px;">
        <div id="box_1" class="mymagicoverbox_fenetre" style="left:-225px; width:450px;">
            Anon | 00500
            <div class="mymagicoverbox_fenetreinterieur" style="height:220px; ">
                <div align="left">
                    <p class="lead">Имя пользователя: Anon</p>
                    <p class="lead">Статус: Активен</p>
                    <p class="lead">Регистрация jabber: <a target="_blank" href="http://plast.cash/registration.php?key="></a></p>
                    <p class="lead">Поток: Anon</p>
                    <p class="lead">TG канал: <a target="_blank" href="">Канал для опретивных оповещений</a></p>
                    
                    <br><br>
                    <div style="width:100px" align="center" class="mymagicoverbox_fermer">Закрыть</div>
                </div>
            </div>
        </div>
    </div>



<div class="main_container">
    <header>
        <a href="index.html"><img class="logo" src="source/logo.png" alt="University 2.0"></a>
        <div class="header_right">
            <div class="user_info">
                <p>Hello,
                <a href="#" iddiv="box_1" class="mymagicoverbox"> Anon </a>


                </p>
                <p>ID: 00500</p>
            </div>
            <div class="user_actions">
                <a href="help.html"
                   class="btn btn_gray btn_transparent btn_border_transparent btn_icon btn_icon_help">Помощь</a>
                
                    
                    <a href="index.html" class="btn  btn_round btn_status btn_status_active btn_gray btn_exit">Выход</a>
                
            </div>
        </div>
    </header>
    <div class="container">
        <nav>
            <a href="index.html" class="btn btn_icon btn_icon_dashboard ">Сводка</a>
            <a href="lections.html" class="btn btn_icon btn_icon_book active">Лекции</a>
            <a href="index.html" class="btn btn_icon btn_icon_group ">Тикеты</a>
            <a href="faq.html" class="btn btn_icon btn_icon_chat ">FAQ</a>
        </nav>
        <div class="content">

<div class="banner_block" style="background-image:url('source/hack_tie4J6J.jpg')">
        <div class="banner_content">
            <h2>Введение</h2>
            <p>Безопасность</p>
            <p>Покидай свой дом так, словно его охраняет тысяча врагов!</p>
        </div>
    </div>
    <br>

<div class="article_actions">
        <a href="security.html" class="btn btn_round btn_gray  btn_icon btn_icon_back ">Назад</a>
    </div>
    <div class="text_content">

Что ж, давайте начнём. Первым разберём необходимость виртуалок<br>
Виртуальные машины - это система в системе<br>
Немного терминологии:<br>
Виртуалка - операционка, котоая запускается в VirtualBox<br>
Хост - основная система<br>
Виртуалки будут терерь использоваться практически везде во всех курсах<br>
Это сделано для защиты основной системы<br>
Безопасность полностью зависит от основной системы. Если на хосте вирус, то вся безопасность рушится<br>
Поэтому было много рекомендаций по установки системы и инструкции туда лишнего не ставить<br>
Но это не значит, что в виртуальной системе можно делать всё, что угодно<br>
Всё же есть вещи, которые могут представлять опастность и из неё<br>
Для начала о том, как упростить себе жизнь с виртуалками<br>
Использовать их будем постоянно, поэтому надо увеличить интергацию с основной системой<br>
Для начала, если у кого-то виртуальна машина изначально тормозит, надо в настройках увеличить объём оперативки ей<br>
Так же поднять доступное количество ядер с 1 до 4<br>
И увеличить объём видеопамяти<br>
Это надо делать, если виртуалка глючит, в других случаях необходимости нет<br>
Дальше надо поставить гостевые дополнения(guest additions)<br>
Они увеличивают интеграцию с основной системой. С ними можно делать общий буфер обмена<br>
Или менять разрешение системы под размер окна<br>
________________________________________<br>
________________________________________<br>
В windows поставить их просто. В запущенной вирталке надо открыть меню Devices вверху<br>
Там выбрать Insert Guest Additions CD image<br>
После этого надо в виртуальной windows открыть проводник<br>
Там появится новый диск в устройствах<br>
Открываем его, запускаем VBoxWindowsAdditions.exe<br>
Процесс установки стандартный. После перезапуска в windows всё будет готово<br>
Разрешение начнёт подстраиваться автоматически. Буфер можно будет настроить в настройках виртуальной машины в VirtualBox<br>
Находится это в General - Advanced - Shared Clipboard<br>
Возможные значения: отключён, однонаправленный и двунаправленный<br>
Чтобы всё, что копируется на хосте попадало в виртуалку и наоборот надо выбрать последний<br>
В настройках есть ещё один интересный пункт - Shared Folders<br>
Это общая папка. Там можно передавать файлы между хостом и виртуалкой<br>
Важно тут то, что файлы хранятся на хосте<br>
Поэтому если с виртуалкой даже что-то случится, все сохранённые общие файлы будут невредимы<br>
Помимо guest additions есть ещё extension pack<br>
Он открывает доступ к компонентам основной системы из виртуалки. Его устанавливать уже не надо<br>
Производительность он не поднимает, ничего полезного он нам не несёт. Наоборот, надо меньше интеграции с хостом<br>
Небольшое уточнение про общие папки. При создании надо указать папку на хосте, которая будет расшариваться, и поставить параметр auto-mount<br>
Тогда после перезапуска виртуальная папка появится в виде жёсткого диска<br>
<h2>О том, как увеличение интеграции сказывается на безопасности</h2>
Мы сейчас настраиваем windows, который будет использоваться для работы с него<br>
Лучше всё перенести туда со временем. Браузинг интернета, работа со сторонними программами в том числе мессенджерами и т.п.<br>
Хост система остаётся просто как платформа для запуска виртуалок, так безопаснее<br>
Помимо этой машины в ходе обучения появися ещё несколько. Как минимум уже есть kali<br>
Так вот, некоторые машины используются для тестирования вирусов, запуска непроверенного ПО и т.п.<br>
На таких машинах guest additions устанавливать можно. Сама установка не понижает защиту<br>
Но вот общий буфер и папки лучше не использовать<br>
Если делать общие папки, то только отдельные<br>
Потому что если в виртуалку попадёт вирус, он сможет выгрести всё из общей папки, или зашить в лежащие там файлы вирусы<br>
Надо понимать, что папки, расшаренные с виртуалками для запуска непроверенного ПО, потенциально заражены<br>
В случае с буфером обмена ситуация не такая очевидная. Но вирусы могут легко читать буфер и красть его содержимое<br>
Адреса кошелько, пароли, личные данные. Всё это часто оказывается в буфере<br>
И проблема в том, что если с виртуалкой стоит общий буфер, то на ней всегда видно, что копируется на хосте<br>
Даже если заражённая виртуалка свёрнута и не используется уже несколько часов<br>
У знакомого был случай, когда через буфер вирус увёл средства<br>
Он копировал адрес bitcoin для крупной оплаты, средства выслал, а через несколько дней оказалось, что деньги не дошли<br>
Стал проверять - адрес, куда отправились средства совсем другой<br>
Первая мысть, что на хосте вирус, надо срочно удалять всё, менять пароли<br>
После беглого осмотра нашлась проблема - это виртуалка для тесторования вирусов<br>
В ней был clipper. Эта программа подменяет адреса криптовалют. И буфер был общим<br>
Адрес для отправки копировался из хоста и вставлялся там же, но всё равно данные были перехвачены. Поэтому надо разрганичивать вируталки и не давать лишних прав там. где это не надо<br>
Помимо windows ставилась ещё и kali linux<br>
kali linux известный дистрибутив для пинтеста. Исследование систем на взлом<br>
Иногда его ставят как основную систему на хост. Но это не правильно и опастно<br>
Потому что kali linux заточен не на безопасность, а на функциональность<br>
Там есть куча инстручентов для разных атак, работакт много сервисов<br>
Но это всё лишние вектора атак. В kali linux в жертву функциональности поставлена безопасноть<br>
Поэтому даже сами разработчики его не рекомендуют ставить его как основную систему<br>
Тем более устанавливая его как виртуалку мы можем добавить уровень защины whonix и тор<br>
Единственное, когда может потребовать запустить kali напрямую - когда нужден доступ к железу<br>
Например, к wi-fi карте<br>
VirtualBox не может пробросить её в виртуальную систему, даже с extension pack<br>
Поэтому можно записать live cd kali на флешку и запустить с него для выполнения нудной операции<br>
Ну а теперь о том, как поставить на него guest additions<br>
Процесс тут сложнее, чем в windows. Вообще в linux обычно делается всё сложнее, эта плата за большое количество возможнойстей конфигурации системы и настроек<br>
Сначала систему надо обновить<br>
Большинство linux систем и kali в том числе обновляется этими двумя командами<br>
apt-get update<br>
apt-get dist-upgrade<br>
Первая - обновить базу приложений. Если лучше делать всегда перед установкой нового приложения, она решает большенство проблем<br>
Вторая - более безотказная версия upgrade. Это обновляет систему в том числе ядро<br>
Надо помнить, что linux системы, хоть и популярны на серверах, не всегда стабильны после обновления. Особенно kali<br>
Поэтому надо делать бекапы важных файлов в виртуалке перед обновлением<br>
Были случаи, когда после обновления после запуска был просто серый экран. Скорее всего, это ошибка конкретной версии. Но восстанавливать такую систему сложнее, чем просто переустановить<br>
Если после командый apt-get update в консоли ничего не появилось и сразу появился ввод следующей команды, то в системе проблема с репозиториями<br>
Тогда надо в среде обучения в FAQ найти В kali ничего не устанавливается<br>
Выполнить там указанные действия и повторить попытку<br>
После запуска update должно появится строчек десять или больше с различными адресами. Тогда всё нормально<br>
Потом устанавливаем дополнения командой<br>
apt-get install -y virtualbox-guest-x11<br>
После upgrade системы её надо перезагрузить<br>
И после установки guest additions тоже<br>
В ходе обновления может запросить прочииать лиценьзионные соглашения, подтвердить конфигурацию и т.п. Надо просто yes нажимать. Без подтверждений процесс повиснет<br>
Если после перезапуска с изменением размера окна разрешение системы подстраивается под него - всё ок<br>
Когда использовать клонирование, а снапшоты<br>
Снапшоты - более быстрая и лёгкая версия клонирования<br>
В результате не получается новая виртуальная машина<br>
А все изменения храняться отдельно. И после выключения виртуальной машины можно откатить её на состояние любого снимка<br>
При клогировании создаётся новая машины. Есть 2 типа клонирования:<br>
1.  Linked clone<br>
2.  Full clone<br>
Первый - надстройка над основной системой. Чтобы он нормально работал, надо чтобы была оригинальная система откуда взят клон<br>
Второй - клонированная машина самостоятельная. Её можно хоть перенести куда угодно. Но вестит такой клон как оригинал(несколько десятког ГБ) и делается медленно<br>
В большенстве случаем достаточно механизма снапшотов<br>
На что надо обратить внимание при клонировании виртуалки <br>
1.  Mac address. В настройках сетевого адапрера у клона его надо обновить, чтобы не было пересечений<br>
2.  IP машины. В виртуалке мы устанавливали настройки IPv4, чтобы было соединение<br>
В клоне эти переметры будут одинакорыми, что будет вызывать конфликт<br>
Соединение может переодически рваться или его может просто не быть<br>
В IPv4 есть поле IP. По сути его надо менять в клонах на новое значение<br>
Менять надо 2 последние цифры<br>
Например, было .20, в клоне ставим .21<br>
Подключение в виртуалках<br>
На данный момент на выходе в виртуалке мы имеем tor. Что не очень хорошо<br>
Не столько в плане безопасности, сколько в комфорте работы. Приходится разгадывать кучу капч и другие трудности<br>
В плане безопасности тоде есть подводные камни<br>
В tor не все выходные узлы работают нормально. Которые стараются манипулировать трафиком и подменять его<br>
Если подключение по протоколу https, то соединение защищено от этого<br>
И с ноды невозможно определить IP пользователя, его скрывает тор<br>
Но на незащищенных протоколах таких как http и ftp трафик могут подменить<br>
Например, могут подменить счаевыемый файл и вшить в него вирус на лету<br>
Поэтому работа с http сайтами через тор не безопасна<br>
В связи с этим возникает потребность иметь дополительную защиту поверх tor<br>
Тут есть такие варианты:<br>
VPN - полное шифрование трафика с виртуальной системы<br>
VPN можно запустить и с виртуалки. Только надо убедиться, что используется протокол tcp. Udp протокол не работает поверх тор<br>
VPN самое координальное решение. Но не популярное. Проблема в том, что обновлять VPN конфиг часто не получится. Соответственно на выходе будет светиться один IP<br>
Его используют тогда, тогда надо дать чистый IP для приложение, которое не умеет работать с прокси<br>
В чём приемущество VPN поверх тора - весь трафик шифруется. Соответственно перехватить на заражённой tor ноде уже нельзя ничего будет<br>
прокси - проксирование трафика конкретного приложения<br>
Для отбеливания IP и вывода его из tor зоны прокси используются чаще всего<br>
Это простой способ раздобыть нормальный IP и уйти от лишних проверок<br>
Чтобы получить чистый IP надо использовать персональные прокси. Заполучить их несложно<br>
Есть публичные прокси. Такие можно найти по базам в интернете<br>
Зачастую с них так же будут капчи, но меньше, поэтому лучше всегда работать с прокси<br>
В чём ещё другое приемущество: IP фиксируется<br>
Большенство систем проверки пользователя отслеживают IP. IP из зоны тора или частая смена IP тогда красный флаг<br>
И с помошью proxy можно решить эту проблему<br>
Но есть и один существенный недостаток - нет шифрования<br>
Это значит, что если сайт не поддерживает шифрование, то вирусная нода всё ещё может манипулировать трафиком. Опять же, это не касается https и onion сайтов<br>
Кстати, onion сайты вроде тоже по http работают в большенстве своём. Но там другой механиз<br>
м. При подключении к onion трафик не покидает тор и не расшифровывается<br>
Поэтому на onion сайтах ничего не угрожает безопасности, какой бы протокол не было<br>
У проблемы с шифрованием есть решение - туннель<br>
Туннель - это защищенный канал связи для трафика<br>
В использовании он не отличается от proxy, но поддерживает шифрование<br>
Заполучить его не так сложно. Достаточно оформить любой VPS сервер<br>
К VPS идёт ssh доступ для подключения<br>
Через него и можно построить туннель<br>
Для этого понадобится скачать openssh https://github.com/PowerShell/Win32-OpenSSH<br>
И из этого архива файлы ssh.exe и libcrypto.dll переместить в c:\windows\system32<br>
Если доступ к туннелю будет делаться с linux, то и этого делать не надо. В linux ssh уже в системе<br>
76. После установки достаточно выполнить команду ssh -D 8888 -N root@SERVER_IP<br>
SERVER_IP - IP вашего VPS<br>
При подключении запросит пароль. Он будет среди доступов к серверу<br>
В итоге на 8888 порту появятся socks5 прокси<br>
Надо будет открыть настройки firefox, в поиске по настройкам ввести proxy и вписать в графу socks5 в IP 127.0.0.1, PORT 8888<br>
Так же внизу есть опция DNS over socks. Её надо включить<br>
И ещё один метод обходить прослушивание тора - своя нода<br>
В дополнительном материале расскажу как настроить. Она нужна для тех же вещей, что разбирали выше<br>
Т.е. не отдавать незащищённые данные зараженным нодам<br>
По сути, эта альтернатива методу с VPN<br>
Давайте обобщу тогда, что и когда нужно<br>
Прокси, VPN, туннель нужен, чтобы получитьт чистый IP вне зоны тор<br>
Прокси бывают персональные, тогда IP чистый. С нормальными персональными прокси не должно возникнуть проблем даже в ЛК банка карты дропа<br>
Подключение в виртуалках<br>
На данный момент на выходе в виртуалке мы имеем tor. Что не очень хорошо<br>
Не столько в плане безопасности, сколько в комфорте работы. Приходится разгадывать кучу капч и другие трудности<br>
В плане безопасности тоде есть подводные камни<br>
В tor не все выходные узлы работают нормально. Которые стараются манипулировать трафиком и подменять его<br>
Если подключение по протоколу https, то соединение защищено от этого<br>
И с ноды невозможно определить IP пользователя, его скрывает тор<br>
Но на незащищенных протоколах таких как http и ftp трафик могут подменить<br>
Например, могут подменить счаевыемый файл и вшить в него вирус на лету<br>
Поэтому работа с http сайтами через тор не безопасна<br>
В связи с этим возникает потребность иметь дополительную защиту поверх tor<br>
Тут есть такие варианты:<br>
VPN - полное шифрование трафика с виртуальной системы<br>
VPN можно запустить и с виртуалки. Только надо убедиться, что используется протокол tcp. Udp протокол не работает поверх тор<br>
VPN самое координальное решение. Но не популярное. Проблема в том, что обновлять VPN конфиг часто не получится. Соответственно на выходе будет светиться один IP<br>
Его используют тогда, тогда надо дать чистый IP для приложение, которое не умеет работать с прокси<br>
В чём приемущество VPN поверх тора - весь трафик шифруется. Соответственно перехватить на заражённой tor ноде уже нельзя ничего будет<br>
прокси - проксирование трафика конкретного приложения<br>
Для отбеливания IP и вывода его из tor зоны прокси используются чаще всего<br>
Это простой способ раздобыть нормальный IP и уйти от лишних проверок<br>
Чтобы получить чистый IP надо использовать персональные прокси. Заполучить их несложно<br>
Есть публичные прокси. Такие можно найти по базам в интернете<br>
Зачастую с них так же будут капчи, но меньше, поэтому лучше всегда работать с прокси<br>
В чём ещё другое приемущество: IP фиксируется<br>
Большенство систем проверки пользователя отслеживают IP. IP из зоны тора или частая смена IP тогда красный флаг<br>
И с помошью proxy можно решить эту проблему<br>
Но есть и один существенный недостаток - нет шифрования<br>
Это значит, что если сайт не поддерживает шифрование, то вирусная нода всё ещё может манипулировать трафиком. Опять же, это не касается https и onion сайтов<br>
Кстати, onion сайты вроде тоже по http работают в большенстве своём. Но там другой механиз<br>
При подключении к onion трафик не покидает тор и не расшифровывается<br>
Поэтому на onion сайтах ничего не угрожает безопасности, какой бы протокол не было<br>
У проблемы с шифрованием есть решение - туннель<br>
Туннель - это защищенный канал связи для трафика<br>
В использовании он не отличается от proxy, но поддерживает шифрование<br>
Заполучить его не так сложно. Достаточно оформить любой VPS сервер<br>
К VPS идёт ssh доступ для подключения<br>
Через него и можно построить туннель<br>
Для этого понадобится скачать openssh https://github.com/PowerShell/Win32-OpenSSH<br>
И из этого архива файлы ssh.exe и libcrypto.dll переместить в c:\windows\system32<br>
Если доступ к туннелю будет делаться с linux, то и этого делать не надо. В linux ssh уже в системе<br>
После установки достаточно выполнить команду ssh -D 8888 -N root@SERVER_IP<br>
SERVER_IP - IP вашего VPS<br>
При подключении запросит пароль. Он будет среди доступов к серверу<br>
В итоге на 8888 порту появятся socks5 прокси<br>
Надо будет открыть настройки firefox, в поиске по настройкам ввести proxy и вписать в графу socks5 в IP 127.0.0.1, PORT 8888<br>
Так же внизу есть опция DNS over socks. Её надо включить<br>
И ещё один метод обходить прослушивание тора - своя нода<br>
В дополнительном материале расскажу как настроить. Она нужна для тех же вещей, что разбирали выше<br>
Т.е. не отдавать незащищённые данные зараженным нодам<br>
По сути, эта альтернатива методу с VPN<br>
Давайте обобщу тогда, что и когда нужно<br>
Прокси, VPN, туннель нужен, чтобы получитьт чистый IP вне зоны тор<br>
Прокси бывают персональные, тогда IP чистый. С нормальными персональными прокси не должно возникнуть проблем даже в ЛК банка карты дропа<br>
Публичные прокси нужны, чтобы IP не прыгал и зачастую с ними меньше проверок<br>
VPN и туннель шифруют всё. VPN на уровне системы, туннель на уровне браузера. Это позвоялет решить проблему с прослушкой нод<br>
Личная нода позволяет уйти от прослушки, так всегда используется своя надёжная нода, но IP всё ещё в зоне тор. Лучше поверх ноды использовать как минимум прокси<br>







    </div>
    <br>


 
        </div>
    </div>
</div>
<footer>
    <p>University 2.0</p>
</footer>

</body>
</html>